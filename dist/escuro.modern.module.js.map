{"version":3,"file":"escuro.modern.module.js","sources":["../src/index.ts"],"sourcesContent":["const updateCallbacks = [];\n\nfunction setLocalDarkMode(value: boolean) {\n  localStorage.setItem('escuro-dark', value.toString());\n}\n\nfunction getLocalDarkMode(): boolean {\n  const localValue = localStorage.getItem('escuro-dark');\n  \n  if (!localValue) {\n    return null;\n  }\n  \n  return localValue === 'true';\n}\n\nexport function isDark(): boolean {\n  return window.matchMedia\n    && window.matchMedia('(prefers-color-scheme: dark)').matches;\n}\n\nexport function isDarkLocal(): boolean {\n  const localDark = getLocalDarkMode();\n\n  if (localDark === null) {\n    return isDark();\n  }\n\n  return localDark;\n}\n\nexport function setDark(isDark: boolean) {\n  setLocalDarkMode(isDark);\n\n  updateCallbacks.forEach(cb => cb(isDark));\n}\n\nexport function onUpdate(cb: (isDark: boolean) => void) {\n  updateCallbacks.push(cb);\n\n  window.matchMedia('(prefers-color-scheme: dark)')\n    .addEventListener('change', () => cb(isDark()));\n}\n"],"names":["const","updateCallbacks","isDark","window","matchMedia","matches","isDarkLocal","localValue","localDark","localStorage","getItem","setDark","setItem","toString","forEach","cb","onUpdate","push","addEventListener"],"mappings":"AAAAA,IAAMC,EAAkB,GAgBxB,SAAgBC,WACPC,OAAOC,YACTD,OAAOC,WAAW,gCAAgCC,QAGzD,SAAgBC,QAdRC,EAeAC,GAfAD,EAAaE,aAAaC,QAAQ,gBAMlB,SAAfH,EAHE,YAcS,OAAdC,EACKN,IAGFM,WAGOG,EAAQT,GA5BtBO,aAAaG,QAAQ,cA6BJV,EA7ByBW,YA+B1CZ,EAAgBa,iBAAQC,UAAMA,EAAGb,cAGnBc,EAASD,GACvBd,EAAgBgB,KAAKF,GAErBZ,OAAOC,WAAW,gCACfc,iBAAiB,2BAAgBH,EAAGb"}