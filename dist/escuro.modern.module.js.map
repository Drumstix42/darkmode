{"version":3,"file":"escuro.modern.module.js","sources":["../src/index.ts"],"sourcesContent":["const DARKMODE_KEY = 'escuro-dark';\n\nfunction setLocalDarkMode(value: boolean) {\n  localStorage.setItem(DARKMODE_KEY, value.toString());\n}\n\nfunction getLocalDarkMode(): boolean {\n  return localStorage.getItem(DARKMODE_KEY) === 'true';\n}\n\nexport function isBrowserDark(): boolean {\n  return window.matchMedia\n    && window.matchMedia('(prefers-color-scheme: dark)').matches;\n}\n\nexport function isDark(): boolean {\n  return getLocalDarkMode() || isBrowserDark();\n}\n\nexport function setDark(isDark: boolean) {\n  setLocalDarkMode(isDark);\n}\n\nexport function onUpdate(cb: (isDark: boolean) => void) {\n  window.matchMedia('(prefers-color-scheme: dark)')\n    .addEventListener('change',cb.call(null, isBrowserDark()));\n}\n\nexport function onDestroy(cb: () => void) {\n  window.matchMedia('(prefers-color-scheme: dark)')\n    .removeEventListener('change', cb.call(null, isBrowserDark()));\n}\n"],"names":["const","DARKMODE_KEY","isBrowserDark","window","matchMedia","matches","isDark","localStorage","getItem","setDark","setItem","toString","onUpdate","cb","addEventListener","call","onDestroy","removeEventListener"],"mappings":"AAAAA,IAAMC,EAAe,cAUrB,SAAgBC,WACPC,OAAOC,YACTD,OAAOC,WAAW,gCAAgCC,QAGzD,SAAgBC,UARgC,SAAvCC,aAAaC,QAAQP,IASCC,aAGfO,EAAQH,GAhBtBC,aAAaG,QAAQT,EAiBJK,EAjBwBK,qBAoB3BC,EAASC,GACvBV,OAAOC,WAAW,gCACfU,iBAAiB,SAASD,EAAGE,KAAK,KAAMb,eAG7Bc,EAAUH,GACxBV,OAAOC,WAAW,gCACfa,oBAAoB,SAAUJ,EAAGE,KAAK,KAAMb"}