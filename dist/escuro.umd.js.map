{"version":3,"file":"escuro.umd.js","sources":["../src/index.ts"],"sourcesContent":["const DARKMODE_KEY = 'escuro-dark';\n\nfunction setLocalDarkMode(value: boolean) {\n  localStorage.setItem(DARKMODE_KEY, value.toString());\n}\n\nfunction getLocalDarkMode(): boolean {\n  return localStorage.getItem(DARKMODE_KEY) === 'true';\n}\n\nexport function isBrowserDark(): boolean {\n  return window.matchMedia\n    && window.matchMedia('(prefers-color-scheme: dark)').matches;\n}\n\nexport function isDark(): boolean {\n  return getLocalDarkMode() || isBrowserDark();\n}\n\nexport function setDark(isDark: boolean) {\n  setLocalDarkMode(isDark);\n}\n\nexport function onUpdate(cb: (isDark: boolean) => void) {\n  window.matchMedia('(prefers-color-scheme: dark)')\n    .addEventListener('change',cb.call(null, isBrowserDark()));\n}\n\nexport function onDestroy(cb: () => void) {\n  window.matchMedia('(prefers-color-scheme: dark)')\n    .removeEventListener('change', cb.call(null, isBrowserDark()));\n}\n"],"names":["isBrowserDark","window","matchMedia","matches","localStorage","getItem","isDark","setItem","toString","cb","addEventListener","call","removeEventListener"],"mappings":"qLAUgBA,WACPC,OAAOC,YACTD,OAAOC,WAAW,gCAAgCC,oDALT,SAAvCC,aAAaC,QAPD,gBAgBUL,wBAGPM,GAhBtBF,aAAaG,QAHM,cAoBFD,EAjBwBE,iCAoBlBC,GACvBR,OAAOC,WAAW,gCACfQ,iBAAiB,SAASD,EAAGE,KAAK,KAAMX,4BAGnBS,GACxBR,OAAOC,WAAW,gCACfU,oBAAoB,SAAUH,EAAGE,KAAK,KAAMX"}