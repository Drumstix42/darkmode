{"version":3,"file":"escuro.umd.js","sources":["../src/index.ts"],"sourcesContent":["const updateCallbacks = [];\n\nfunction setLocalDarkMode(value: boolean) {\n  localStorage.setItem('escuro-dark', value.toString());\n}\n\nfunction getLocalDarkMode(): boolean {\n  const localValue = localStorage.getItem('escuro-dark');\n  \n  if (!localValue) {\n    return null;\n  }\n  \n  return localValue === 'true';\n}\n\nexport function isDark(): boolean {\n  return window.matchMedia\n    && window.matchMedia('(prefers-color-scheme: dark)').matches;\n}\n\nexport function isDarkLocal(): boolean {\n  const localDark = getLocalDarkMode();\n\n  if (localDark === null) {\n    return isDark();\n  }\n\n  return localDark;\n}\n\nexport function setDark(isDark: boolean) {\n  setLocalDarkMode(isDark);\n\n  updateCallbacks.forEach(cb => cb(isDark));\n}\n\nexport function onUpdate(cb: (isDark: boolean) => void) {\n  updateCallbacks.push(cb);\n\n  window.matchMedia('(prefers-color-scheme: dark)')\n    .addEventListener('change', () => cb(isDark()));\n}\n"],"names":["const","updateCallbacks","isDark","window","matchMedia","matches","localValue","localDark","localStorage","getItem","setItem","toString","forEach","cb","push","addEventListener"],"mappings":"4KAAAA,IAAMC,EAAkB,YAgBRC,WACPC,OAAOC,YACTD,OAAOC,WAAW,gCAAgCC,gDAXjDC,EAeAC,GAfAD,EAAaE,aAAaC,QAAQ,gBAMlB,SAAfH,EAHE,YAcS,OAAdC,EACKL,IAGFK,sBAGeL,GA5BtBM,aAAaE,QAAQ,cA6BJR,EA7ByBS,YA+B1CV,EAAgBW,iBAAQC,UAAMA,EAAGX,0BAGVW,GACvBZ,EAAgBa,KAAKD,GAErBV,OAAOC,WAAW,gCACfW,iBAAiB,2BAAgBF,EAAGX"}